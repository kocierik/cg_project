<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <button id="fullscreenButton">FullScreen</button>
    <button id="audioControl">Play Audio</button>
    <button id="toggle-lights-button">Light</button>
    <audio id="backgroundAudio" src="airplane.mp3" loop></audio>
    <canvas id="canvas"></canvas>
    <!--
for most samples webgl-utils only provides shader compiling/linking and
canvas resizing because why clutter the examples with code that's the same in every sample.
See https://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html
and https://webglfundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html
for webgl-utils, m3, m4, and webgl-lessons-ui.
-->
    <script id="vertex-shader-3d" type="x-shader/x-vertex">
      attribute vec4 a_position;
      varying vec4 v_position;
      void main() {
        v_position = a_position;
        gl_Position = a_position;
        gl_Position.z = 1.0;
      }
    </script>
    <!-- fragment shader -->
    <script id="fragment-shader-3d" type="x-shader/x-fragment">
      precision mediump float;

      uniform samplerCube u_skybox;
      uniform mat4 u_viewDirectionProjectionInverse;

      varying vec4 v_position;
      void main() {
        vec4 t = u_viewDirectionProjectionInverse * v_position;
        gl_FragColor = textureCube(u_skybox, normalize(t.xyz / t.w));
      }
    </script>

    <script src="https://webglfundamentals.org/webgl/resources/webgl-utils.js"></script>
    <script src="https://webglfundamentals.org/webgl/resources/m4.js"></script>
    <script src="https://webglfundamentals.org/webgl/resources/m3.js"></script>
    <script src="index.js"></script>

    <script src="index2.js"></script>

    <!-- <script src="./js/utils/handlekey.js"></script>
    <script src="js/utils/fullscreenAudio.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
      var audio = document.getElementById("backgroundAudio");
      var audioControlButton = document.getElementById("audioControl");

      audioControlButton.addEventListener("click", function () {
        if (audio.paused) {
          audio.play();
          audioControlButton.textContent = "Pause Audio";
        } else {
          audio.pause();
          audioControlButton.textContent = "Play Audio";
        }
      });
    </script>

    <script>
      var fullscreenButton = document.getElementById("fullscreenButton");

      // Aggiungi un listener per il click sul bottone
      fullscreenButton.addEventListener("click", function () {
        var canvas = document.getElementById("canvas");

        // Controlla se il browser supporta la modalità fullscreen
        if (document.fullscreenEnabled) {
          // Richiedi la modalità fullscreen per il canvas
          canvas.requestFullscreen();
        } else {
          alert("Fullscreen non supportato dal browser.");
        }
      });

      const toggleLightsButton = document.querySelector("#toggle-lights-button");
      toggleLightsButton.addEventListener("click", () => {
        lightsEnabled = !lightsEnabled; // Cambia lo stato delle luci
      });

    </script>
  </body>
</html>
